import{a as pn,e as Ze,g as bn,c as re}from"./index-zhDwC2ve.js";function Ke(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Oo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qe(e,...t){if(!Oo(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function bl(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ke(e.outputLen),Ke(e.blockLen)}function nr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ao(e,t){Qe(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const we=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fo(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function yl(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function gl(e,t){return e<<32-t|e>>>t}const or=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function So(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function ir(e){for(let t=0;t<e.length;t++)e[t]=So(e[t])}function xo(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function yn(e){return typeof e=="string"&&(e=xo(e)),Qe(e),e}function wl(...e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];Qe(o),t+=o.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const i=e[n];r.set(i,o),o+=i.length}return r}class Co{clone(){return this._cloneInto()}}function Bo(e){const t=n=>e().update(yn(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Dl(e=32){if(we&&typeof we.getRandomValues=="function")return we.getRandomValues(new Uint8Array(e));if(we&&typeof we.randomBytes=="function")return we.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Le=BigInt(2**32-1),sr=BigInt(32);function To(e,t=!1){return t?{h:Number(e&Le),l:Number(e>>sr&Le)}:{h:Number(e>>sr&Le)|0,l:Number(e&Le)|0}}function Io(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:a}=To(e[o],t);[r[o],n[o]]=[i,a]}return[r,n]}const Ro=(e,t,r)=>e<<r|t>>>32-r,Uo=(e,t,r)=>t<<r|e>>>32-r,Po=(e,t,r)=>t<<r-32|e>>>64-r,jo=(e,t,r)=>e<<r-32|t>>>64-r,gn=[],wn=[],Dn=[],Lo=BigInt(0),_e=BigInt(1),No=BigInt(2),Mo=BigInt(7),zo=BigInt(256),$o=BigInt(113);for(let e=0,t=_e,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],gn.push(2*(5*n+r)),wn.push((e+1)*(e+2)/2%64);let o=Lo;for(let i=0;i<7;i++)t=(t<<_e^(t>>Mo)*$o)%zo,t&No&&(o^=_e<<(_e<<BigInt(i))-_e);Dn.push(o)}const[ko,Ho]=Io(Dn,!0),ar=(e,t,r)=>r>32?Po(e,t,r):Ro(e,t,r),ur=(e,t,r)=>r>32?jo(e,t,r):Uo(e,t,r);function qo(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let a=0;a<10;a++)r[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const c=(a+8)%10,f=(a+2)%10,s=r[f],u=r[f+1],d=ar(s,u,1)^r[c],h=ur(s,u,1)^r[c+1];for(let y=0;y<50;y+=10)e[a+y]^=d,e[a+y+1]^=h}let o=e[2],i=e[3];for(let a=0;a<24;a++){const c=wn[a],f=ar(o,i,c),s=ur(o,i,c),u=gn[a];o=e[u],i=e[u+1],e[u]=f,e[u+1]=s}for(let a=0;a<50;a+=10){for(let c=0;c<10;c++)r[c]=e[a+c];for(let c=0;c<10;c++)e[a+c]^=~r[(c+2)%10]&r[(c+4)%10]}e[0]^=ko[n],e[1]^=Ho[n]}r.fill(0)}class Lt extends Co{constructor(t,r,n,o=!1,i=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=o,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ke(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Fo(this.state)}keccak(){or||ir(this.state32),qo(this.state32,this.rounds),or||ir(this.state32),this.posOut=0,this.pos=0}update(t){nr(this);const{blockLen:r,state:n}=this;t=yn(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);for(let c=0;c<a;c++)n[this.pos++]^=t[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:o}=this;t[n]^=r,(r&128)!==0&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){nr(this,!1),Qe(t),this.finish();const r=this.state,{blockLen:n}=this;for(let o=0,i=t.length;o<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-o);t.set(r.subarray(this.posOut,this.posOut+a),o),this.posOut+=a,o+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ke(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ao(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:o,rounds:i,enableXOF:a}=this;return t||(t=new Lt(r,n,o,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=o,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Vo=(e,t,r)=>Bo(()=>new Lt(t,e,r)),ml=Vo(1,136,256/8);function ge(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function mn(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=ge(r);return(o,i)=>n.then(a=>i(a.transaction(t,o).objectStore(t)))}let st;function Te(){return st||(st=mn("keyval-store","keyval")),st}function cr(e,t=Te()){return t("readonly",r=>ge(r.get(e)))}function Wo(e,t,r=Te()){return r("readwrite",n=>(n.put(t,e),ge(n.transaction)))}function Ko(e,t=Te()){return t("readwrite",r=>(r.delete(e),ge(r.transaction)))}function Yo(e=Te()){return e("readwrite",t=>(t.clear(),ge(t.transaction)))}function Go(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ge(e.transaction)}function Jo(e=Te()){return e("readonly",t=>{if(t.getAllKeys)return ge(t.getAllKeys());const r=[];return Go(t,n=>r.push(n.key)).then(()=>r)})}var at={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var At=function(e,t){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},At(e,t)};function Xo(e,t){At(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ft=function(){return Ft=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ft.apply(this,arguments)};function Zo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Qo(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function ei(e,t){return function(r,n){t(r,n,e)}}function ti(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ri(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?i(u.value):o(u.value).then(c,f)}s((n=n.apply(e,t||[])).next())})}function ni(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(u){s=[6,u],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function oi(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function ii(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function St(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function En(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function si(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(En(arguments[t]));return e}function ai(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n}function Ce(e){return this instanceof Ce?(this.v=e,this):new Ce(e)}function ui(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(y){return new Promise(function(b,g){i.push([h,y,b,g])>1||c(h,y)})})}function c(h,y){try{f(n[h](y))}catch(b){d(i[0][3],b)}}function f(h){h.value instanceof Ce?Promise.resolve(h.value.v).then(s,u):d(i[0][2],h)}function s(h){c("next",h)}function u(h){c("throw",h)}function d(h,y){h(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ci(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,i){t[o]=e[o]?function(a){return(r=!r)?{value:Ce(e[o](a)),done:o==="return"}:i?i(a):a}:i}}function fi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof St=="function"?St(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(c,f){a=e[i](a),o(c,f,a.done,a.value)})}}function o(i,a,c,f){Promise.resolve(f).then(function(s){i({value:s,done:c})},a)}}function li(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function hi(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function di(e){return e&&e.__esModule?e:{default:e}}function pi(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function bi(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const yi=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ft},__asyncDelegator:ci,__asyncGenerator:ui,__asyncValues:fi,__await:Ce,__awaiter:ri,__classPrivateFieldGet:pi,__classPrivateFieldSet:bi,__createBinding:oi,__decorate:Qo,__exportStar:ii,__extends:Xo,__generator:ni,__importDefault:di,__importStar:hi,__makeTemplateObject:li,__metadata:ti,__param:ei,__read:En,__rest:Zo,__spread:si,__spreadArrays:ai,__values:St},Symbol.toStringTag,{value:"Module"})),et=pn(yi);var ut={},Oe={},fr;function gi(){if(fr)return Oe;fr=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Oe.delay=e,Oe}var pe={},ct={},be={},lr;function wi(){return lr||(lr=1,Object.defineProperty(be,"__esModule",{value:!0}),be.ONE_THOUSAND=be.ONE_HUNDRED=void 0,be.ONE_HUNDRED=100,be.ONE_THOUSAND=1e3),be}var ft={},hr;function Di(){return hr||(hr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(ft)),ft}var dr;function vn(){return dr||(dr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=et;t.__exportStar(wi(),e),t.__exportStar(Di(),e)}(ct)),ct}var pr;function mi(){if(pr)return pe;pr=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.fromMiliseconds=pe.toMiliseconds=void 0;const e=vn();function t(n){return n*e.ONE_THOUSAND}pe.toMiliseconds=t;function r(n){return Math.floor(n/e.ONE_THOUSAND)}return pe.fromMiliseconds=r,pe}var br;function Ei(){return br||(br=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=et;t.__exportStar(gi(),e),t.__exportStar(mi(),e)}(ut)),ut}var De={},yr;function vi(){if(yr)return De;yr=1,Object.defineProperty(De,"__esModule",{value:!0}),De.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:o})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return De.Watch=e,De.default=e,De}var lt={},Ae={},gr;function _i(){if(gr)return Ae;gr=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.IWatch=void 0;class e{}return Ae.IWatch=e,Ae}var wr;function Oi(){return wr||(wr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),et.__exportStar(_i(),e)}(lt)),lt}var Dr;function Ai(){return Dr||(Dr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=et;t.__exportStar(Ei(),e),t.__exportStar(vi(),e),t.__exportStar(Oi(),e),t.__exportStar(vn(),e)}(at)),at}var Nt=Ai(),k={},mr;function _n(){if(mr)return k;mr=1,Object.defineProperty(k,"__esModule",{value:!0}),k.getLocalStorage=k.getLocalStorageOrThrow=k.getCrypto=k.getCryptoOrThrow=k.getLocation=k.getLocationOrThrow=k.getNavigator=k.getNavigatorOrThrow=k.getDocument=k.getDocumentOrThrow=k.getFromWindowOrThrow=k.getFromWindow=void 0;function e(h){let y;return typeof window<"u"&&typeof window[h]<"u"&&(y=window[h]),y}k.getFromWindow=e;function t(h){const y=e(h);if(!y)throw new Error(`${h} is not defined in Window`);return y}k.getFromWindowOrThrow=t;function r(){return t("document")}k.getDocumentOrThrow=r;function n(){return e("document")}k.getDocument=n;function o(){return t("navigator")}k.getNavigatorOrThrow=o;function i(){return e("navigator")}k.getNavigator=i;function a(){return t("location")}k.getLocationOrThrow=a;function c(){return e("location")}k.getLocation=c;function f(){return t("crypto")}k.getCryptoOrThrow=f;function s(){return e("crypto")}k.getCrypto=s;function u(){return t("localStorage")}k.getLocalStorageOrThrow=u;function d(){return e("localStorage")}return k.getLocalStorage=d,k}var El=_n(),Fe={},Er;function Fi(){if(Er)return Fe;Er=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getWindowMetadata=void 0;const e=_n();function t(){let r,n;try{r=e.getDocumentOrThrow(),n=e.getLocationOrThrow()}catch{return null}function o(){const y=r.getElementsByTagName("link"),b=[];for(let g=0;g<y.length;g++){const F=y[g],S=F.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const A=F.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let D=n.protocol+"//"+n.host;if(A.indexOf("/")===0)D+=A;else{const x=n.pathname.split("/");x.pop();const I=x.join("/");D+=I+"/"+A}b.push(D)}else if(A.indexOf("//")===0){const D=n.protocol+A;b.push(D)}else b.push(A)}}return b}function i(...y){const b=r.getElementsByTagName("meta");for(let g=0;g<b.length;g++){const F=b[g],S=["itemprop","property","name"].map(A=>F.getAttribute(A)).filter(A=>A?y.includes(A):!1);if(S.length&&S){const A=F.getAttribute("content");if(A)return A}}return""}function a(){let y=i("name","og:site_name","og:title","twitter:title");return y||(y=r.title),y}function c(){return i("description","og:description","twitter:description","keywords")}const f=a(),s=c(),u=n.origin,d=o();return{description:s,url:u,icons:d,name:f}}return Fe.getWindowMetadata=t,Fe}var vl=Fi();function Si(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let s=0;s<t.length;s++)t[s]=255;for(let s=0;s<e.length;s++){const u=e.charAt(s),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=s}const r=e.length,n=e.charAt(0),o=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(s){if(s instanceof Uint8Array||(ArrayBuffer.isView(s)?s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength):Array.isArray(s)&&(s=Uint8Array.from(s))),!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(s.length===0)return"";let u=0,d=0,h=0;const y=s.length;for(;h!==y&&s[h]===0;)h++,u++;const b=(y-h)*i+1>>>0,g=new Uint8Array(b);for(;h!==y;){let A=s[h],D=0;for(let x=b-1;(A!==0||D<d)&&x!==-1;x--,D++)A+=256*g[x]>>>0,g[x]=A%r>>>0,A=A/r>>>0;if(A!==0)throw new Error("Non-zero carry");d=D,h++}let F=b-d;for(;F!==b&&g[F]===0;)F++;let S=n.repeat(u);for(;F<b;++F)S+=e.charAt(g[F]);return S}function c(s){if(typeof s!="string")throw new TypeError("Expected String");if(s.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;s[u]===n;)d++,u++;const y=(s.length-u)*o+1>>>0,b=new Uint8Array(y);for(;u<s.length;){const A=s.charCodeAt(u);if(A>255)return;let D=t[A];if(D===255)return;let x=0;for(let I=y-1;(D!==0||x<h)&&I!==-1;I--,x++)D+=r*b[I]>>>0,b[I]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");h=x,u++}let g=y-h;for(;g!==y&&b[g]===0;)g++;const F=new Uint8Array(d+(y-g));let S=d;for(;g!==y;)F[S++]=b[g++];return F}function f(s){const u=c(s);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:c,decode:f}}var xi="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const _l=Si(xi),Ci=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),Bi=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(n,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ie(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Bi(e)}catch{return e}}function he(e){return typeof e=="string"?e:Ci(e)||""}function Ti(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function On(e,...t){if(!Ti(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function vr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ii(e,t){On(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const me=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ht=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Ri(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function An(e){return typeof e=="string"&&(e=Ri(e)),On(e),e}class Ui{clone(){return this._cloneInto()}}function Pi(e){const t=n=>e().update(An(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Fn(e=32){if(me&&typeof me.getRandomValues=="function")return me.getRandomValues(new Uint8Array(e));if(me&&typeof me.randomBytes=="function")return me.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function ji(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),c=Number(r&i),f=n?4:0,s=n?0:4;e.setUint32(t+f,a,n),e.setUint32(t+s,c,n)}class Li extends Ui{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ht(this.buffer)}update(t){vr(this);const{view:r,buffer:n,blockLen:o}=this;t=An(t);const i=t.length;for(let a=0;a<i;){const c=Math.min(o-this.pos,i-a);if(c===o){const f=ht(t);for(;o<=i-a;a+=o)this.process(f,a);continue}n.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){vr(this),Ii(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:o,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let d=a;d<o;d++)r[d]=0;ji(n,o-8,BigInt(this.length*8),i),this.process(n,0);const c=ht(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=f/4,u=this.get();if(s>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<s;d++)c.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=a,o%r&&t.buffer.set(n),t}}const Ne=BigInt(2**32-1),xt=BigInt(32);function Sn(e,t=!1){return t?{h:Number(e&Ne),l:Number(e>>xt&Ne)}:{h:Number(e>>xt&Ne)|0,l:Number(e&Ne)|0}}function Ni(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:a}=Sn(e[o],t);[r[o],n[o]]=[i,a]}return[r,n]}const Mi=(e,t)=>BigInt(e>>>0)<<xt|BigInt(t>>>0),zi=(e,t,r)=>e>>>r,$i=(e,t,r)=>e<<32-r|t>>>r,ki=(e,t,r)=>e>>>r|t<<32-r,Hi=(e,t,r)=>e<<32-r|t>>>r,qi=(e,t,r)=>e<<64-r|t>>>r-32,Vi=(e,t,r)=>e>>>r-32|t<<64-r,Wi=(e,t)=>t,Ki=(e,t)=>e,Yi=(e,t,r)=>e<<r|t>>>32-r,Gi=(e,t,r)=>t<<r|e>>>32-r,Ji=(e,t,r)=>t<<r-32|e>>>64-r,Xi=(e,t,r)=>e<<r-32|t>>>64-r;function Zi(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}const Qi=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),es=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,ts=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),rs=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,ns=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),os=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0,P={fromBig:Sn,split:Ni,toBig:Mi,shrSH:zi,shrSL:$i,rotrSH:ki,rotrSL:Hi,rotrBH:qi,rotrBL:Vi,rotr32H:Wi,rotr32L:Ki,rotlSH:Yi,rotlSL:Gi,rotlBH:Ji,rotlBL:Xi,add:Zi,add3L:Qi,add3H:es,add4L:ts,add4H:rs,add5H:os,add5L:ns},[is,ss]=P.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),fe=new Uint32Array(80),le=new Uint32Array(80);class as extends Li{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:o,Ch:i,Cl:a,Dh:c,Dl:f,Eh:s,El:u,Fh:d,Fl:h,Gh:y,Gl:b,Hh:g,Hl:F}=this;return[t,r,n,o,i,a,c,f,s,u,d,h,y,b,g,F]}set(t,r,n,o,i,a,c,f,s,u,d,h,y,b,g,F){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=a|0,this.Dh=c|0,this.Dl=f|0,this.Eh=s|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=y|0,this.Gl=b|0,this.Hh=g|0,this.Hl=F|0}process(t,r){for(let D=0;D<16;D++,r+=4)fe[D]=t.getUint32(r),le[D]=t.getUint32(r+=4);for(let D=16;D<80;D++){const x=fe[D-15]|0,I=le[D-15]|0,w=P.rotrSH(x,I,1)^P.rotrSH(x,I,8)^P.shrSH(x,I,7),v=P.rotrSL(x,I,1)^P.rotrSL(x,I,8)^P.shrSL(x,I,7),_=fe[D-2]|0,B=le[D-2]|0,R=P.rotrSH(_,B,19)^P.rotrBH(_,B,61)^P.shrSH(_,B,6),M=P.rotrSL(_,B,19)^P.rotrBL(_,B,61)^P.shrSL(_,B,6),L=P.add4L(v,M,le[D-7],le[D-16]),W=P.add4H(L,w,R,fe[D-7],fe[D-16]);fe[D]=W|0,le[D]=L|0}let{Ah:n,Al:o,Bh:i,Bl:a,Ch:c,Cl:f,Dh:s,Dl:u,Eh:d,El:h,Fh:y,Fl:b,Gh:g,Gl:F,Hh:S,Hl:A}=this;for(let D=0;D<80;D++){const x=P.rotrSH(d,h,14)^P.rotrSH(d,h,18)^P.rotrBH(d,h,41),I=P.rotrSL(d,h,14)^P.rotrSL(d,h,18)^P.rotrBL(d,h,41),w=d&y^~d&g,v=h&b^~h&F,_=P.add5L(A,I,v,ss[D],le[D]),B=P.add5H(_,S,x,w,is[D],fe[D]),R=_|0,M=P.rotrSH(n,o,28)^P.rotrBH(n,o,34)^P.rotrBH(n,o,39),L=P.rotrSL(n,o,28)^P.rotrBL(n,o,34)^P.rotrBL(n,o,39),W=n&i^n&c^i&c,T=o&a^o&f^a&f;S=g|0,A=F|0,g=y|0,F=b|0,y=d|0,b=h|0,{h:d,l:h}=P.add(s|0,u|0,B|0,R|0),s=c|0,u=f|0,c=i|0,f=a|0,i=n|0,a=o|0;const l=P.add3L(R,L,T);n=P.add3H(l,B,M,W),o=l|0}({h:n,l:o}=P.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:a}=P.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:c,l:f}=P.add(this.Ch|0,this.Cl|0,c|0,f|0),{h:s,l:u}=P.add(this.Dh|0,this.Dl|0,s|0,u|0),{h:d,l:h}=P.add(this.Eh|0,this.El|0,d|0,h|0),{h:y,l:b}=P.add(this.Fh|0,this.Fl|0,y|0,b|0),{h:g,l:F}=P.add(this.Gh|0,this.Gl|0,g|0,F|0),{h:S,l:A}=P.add(this.Hh|0,this.Hl|0,S|0,A|0),this.set(n,o,i,a,c,f,s,u,d,h,y,b,g,F,S,A)}roundClean(){fe.fill(0),le.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const us=Pi(()=>new as);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mt=BigInt(0),xn=BigInt(1),cs=BigInt(2);function zt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function $t(e){if(!zt(e))throw new Error("Uint8Array expected")}function dt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const fs=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function kt(e){$t(e);let t="";for(let r=0;r<e.length;r++)t+=fs[e[r]];return t}function Cn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Mt:BigInt("0x"+e)}const ie={_0:48,_9:57,A:65,F:70,a:97,f:102};function _r(e){if(e>=ie._0&&e<=ie._9)return e-ie._0;if(e>=ie.A&&e<=ie.F)return e-(ie.A-10);if(e>=ie.a&&e<=ie.f)return e-(ie.a-10)}function Bn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const a=_r(e.charCodeAt(i)),c=_r(e.charCodeAt(i+1));if(a===void 0||c===void 0){const f=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[o]=a*16+c}return n}function ls(e){return Cn(kt(e))}function qe(e){return $t(e),Cn(kt(Uint8Array.from(e).reverse()))}function Tn(e,t){return Bn(e.toString(16).padStart(t*2,"0"))}function Ct(e,t){return Tn(e,t).reverse()}function se(e,t,r){let n;if(typeof t=="string")try{n=Bn(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(zt(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}function Or(...e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];$t(o),t+=o.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const i=e[n];r.set(i,o),o+=i.length}return r}const pt=e=>typeof e=="bigint"&&Mt<=e;function hs(e,t,r){return pt(e)&&pt(t)&&pt(r)&&t<=e&&e<r}function Se(e,t,r,n){if(!hs(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function ds(e){let t;for(t=0;e>Mt;e>>=xn,t+=1);return t}const ps=e=>(cs<<BigInt(e-1))-xn,bs={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||zt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ht(e,t,r={}){const n=(o,i,a)=>{const c=bs[i];if(typeof c!="function")throw new Error("invalid validator function");const f=e[o];if(!(a&&f===void 0)&&!c(f,e))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+f)};for(const[o,i]of Object.entries(t))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return e}function Ar(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(o!==void 0)return o;const i=e(r,...n);return t.set(r,i),i}}const Y=BigInt(0),q=BigInt(1),ye=BigInt(2),ys=BigInt(3),Bt=BigInt(4),Fr=BigInt(5),Sr=BigInt(8);function V(e,t){const r=e%t;return r>=Y?r:t+r}function gs(e,t,r){if(t<Y)throw new Error("invalid exponent, negatives unsupported");if(r<=Y)throw new Error("invalid modulus");if(r===q)return Y;let n=q;for(;t>Y;)t&q&&(n=n*e%r),e=e*e%r,t>>=q;return n}function te(e,t,r){let n=e;for(;t-- >Y;)n*=n,n%=r;return n}function xr(e,t){if(e===Y)throw new Error("invert: expected non-zero number");if(t<=Y)throw new Error("invert: expected positive modulus, got "+t);let r=V(e,t),n=t,o=Y,i=q;for(;r!==Y;){const a=n/r,c=n%r,f=o-i*a;n=r,r=c,o=i,i=f}if(n!==q)throw new Error("invert: does not exist");return V(o,t)}function ws(e){const t=(e-q)/ye;let r,n,o;for(r=e-q,n=0;r%ye===Y;r/=ye,n++);for(o=ye;o<e&&gs(o,t,e)!==e-q;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(e+q)/Bt;return function(c,f){const s=c.pow(f,a);if(!c.eql(c.sqr(s),f))throw new Error("Cannot find square root");return s}}const i=(r+q)/ye;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,s=a.pow(a.mul(a.ONE,o),r),u=a.pow(c,i),d=a.pow(c,r);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let b=a.sqr(d);h<f&&!a.eql(b,a.ONE);h++)b=a.sqr(b);const y=a.pow(s,q<<BigInt(f-h-1));s=a.sqr(y),u=a.mul(u,y),d=a.mul(d,s),f=h}return u}}function Ds(e){if(e%Bt===ys){const t=(e+q)/Bt;return function(r,n){const o=r.pow(n,t);if(!r.eql(r.sqr(o),n))throw new Error("Cannot find square root");return o}}if(e%Sr===Fr){const t=(e-Fr)/Sr;return function(r,n){const o=r.mul(n,ye),i=r.pow(o,t),a=r.mul(n,i),c=r.mul(r.mul(a,ye),i),f=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(f),n))throw new Error("Cannot find square root");return f}}return ws(e)}const ms=(e,t)=>(V(e,t)&q)===q,Es=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vs(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Es.reduce((n,o)=>(n[o]="function",n),t);return Ht(e,r)}function _s(e,t,r){if(r<Y)throw new Error("invalid exponent, negatives unsupported");if(r===Y)return e.ONE;if(r===q)return t;let n=e.ONE,o=t;for(;r>Y;)r&q&&(n=e.mul(n,o)),o=e.sqr(o),r>>=q;return n}function Os(e,t){const r=new Array(t.length),n=t.reduce((i,a,c)=>e.is0(a)?i:(r[c]=i,e.mul(i,a)),e.ONE),o=e.inv(n);return t.reduceRight((i,a,c)=>e.is0(a)?i:(r[c]=e.mul(i,r[c]),e.mul(i,a)),o),r}function In(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Rn(e,t,r=!1,n={}){if(e<=Y)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:i}=In(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const c=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:i,MASK:ps(o),ZERO:Y,ONE:q,create:f=>V(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Y<=f&&f<e},is0:f=>f===Y,isOdd:f=>(f&q)===q,neg:f=>V(-f,e),eql:(f,s)=>f===s,sqr:f=>V(f*f,e),add:(f,s)=>V(f+s,e),sub:(f,s)=>V(f-s,e),mul:(f,s)=>V(f*s,e),pow:(f,s)=>_s(c,f,s),div:(f,s)=>V(f*xr(s,e),e),sqrN:f=>f*f,addN:(f,s)=>f+s,subN:(f,s)=>f-s,mulN:(f,s)=>f*s,inv:f=>xr(f,e),sqrt:n.sqrt||(f=>(a||(a=Ds(e)),a(c,f))),invertBatch:f=>Os(c,f),cmov:(f,s,u)=>u?s:f,toBytes:f=>r?Ct(f,i):Tn(f,i),fromBytes:f=>{if(f.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+f.length);return r?qe(f):ls(f)}});return Object.freeze(c)}const Cr=BigInt(0),Me=BigInt(1);function bt(e,t){const r=t.negate();return e?r:t}function Un(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function yt(e,t){Un(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function As(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Fs(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const gt=new WeakMap,Pn=new WeakMap;function wt(e){return Pn.get(e)||1}function Ss(e,t){return{constTimeNegate:bt,hasPrecomputes(r){return wt(r)!==1},unsafeLadder(r,n,o=e.ZERO){let i=r;for(;n>Cr;)n&Me&&(o=o.add(i)),i=i.double(),n>>=Me;return o},precomputeWindow(r,n){const{windows:o,windowSize:i}=yt(n,t),a=[];let c=r,f=c;for(let s=0;s<o;s++){f=c,a.push(f);for(let u=1;u<i;u++)f=f.add(c),a.push(f);c=f.double()}return a},wNAF(r,n,o){const{windows:i,windowSize:a}=yt(r,t);let c=e.ZERO,f=e.BASE;const s=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<i;h++){const y=h*a;let b=Number(o&s);o>>=d,b>a&&(b-=u,o+=Me);const g=y,F=y+Math.abs(b)-1,S=h%2!==0,A=b<0;b===0?f=f.add(bt(S,n[g])):c=c.add(bt(A,n[F]))}return{p:c,f}},wNAFUnsafe(r,n,o,i=e.ZERO){const{windows:a,windowSize:c}=yt(r,t),f=BigInt(2**r-1),s=2**r,u=BigInt(r);for(let d=0;d<a;d++){const h=d*c;if(o===Cr)break;let y=Number(o&f);if(o>>=u,y>c&&(y-=s,o+=Me),y===0)continue;let b=n[h+Math.abs(y)-1];y<0&&(b=b.negate()),i=i.add(b)}return i},getPrecomputes(r,n,o){let i=gt.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&gt.set(n,o(i))),i},wNAFCached(r,n,o){const i=wt(r);return this.wNAF(i,this.getPrecomputes(i,r,o),n)},wNAFCachedUnsafe(r,n,o,i){const a=wt(r);return a===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(a,this.getPrecomputes(a,r,o),n,i)},setWindowSize(r,n){Un(n,t),Pn.set(r,n),gt.delete(r)}}}function xs(e,t,r,n){if(As(r,e),Fs(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,i=ds(BigInt(r.length)),a=i>12?i-3:i>4?i-2:i?2:1,c=(1<<a)-1,f=new Array(c+1).fill(o),s=Math.floor((t.BITS-1)/a)*a;let u=o;for(let d=s;d>=0;d-=a){f.fill(o);for(let y=0;y<n.length;y++){const b=n[y],g=Number(b>>BigInt(d)&BigInt(c));f[g]=f[g].add(r[y])}let h=o;for(let y=f.length-1,b=o;y>0;y--)b=b.add(f[y]),h=h.add(b);if(u=u.add(h),d!==0)for(let y=0;y<a;y++)u=u.double()}return u}function Cs(e){return vs(e.Fp),Ht(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...In(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ee=BigInt(0),X=BigInt(1),ze=BigInt(2),Bs=BigInt(8),Ts={zip215:!0};function Is(e){const t=Cs(e);return Ht(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Rs(e){const t=Is(e),{Fp:r,n,prehash:o,hash:i,randomBytes:a,nByteLength:c,h:f}=t,s=ze<<BigInt(c*8)-X,u=r.create,d=Rn(t.n,t.nBitLength),h=t.uvRatio||((l,p)=>{try{return{isValid:!0,value:r.sqrt(l*r.inv(p))}}catch{return{isValid:!1,value:ee}}}),y=t.adjustScalarBytes||(l=>l),b=t.domain||((l,p,m)=>{if(dt("phflag",m),p.length||m)throw new Error("Contexts/pre-hash are not supported");return l});function g(l,p){Se("coordinate "+l,p,ee,s)}function F(l){if(!(l instanceof D))throw new Error("ExtendedPoint expected")}const S=Ar((l,p)=>{const{ex:m,ey:O,ez:C}=l,E=l.is0();p==null&&(p=E?Bs:r.inv(C));const j=u(m*p),z=u(O*p),N=u(C*p);if(E)return{x:ee,y:X};if(N!==X)throw new Error("invZ was invalid");return{x:j,y:z}}),A=Ar(l=>{const{a:p,d:m}=t;if(l.is0())throw new Error("bad point: ZERO");const{ex:O,ey:C,ez:E,et:j}=l,z=u(O*O),N=u(C*C),U=u(E*E),$=u(U*U),H=u(z*p),ne=u(U*u(H+N)),oe=u($+u(m*u(z*N)));if(ne!==oe)throw new Error("bad point: equation left != right (1)");const Q=u(O*C),ce=u(E*j);if(Q!==ce)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(p,m,O,C){this.ex=p,this.ey=m,this.ez=O,this.et=C,g("x",p),g("y",m),g("z",O),g("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof D)throw new Error("extended point not allowed");const{x:m,y:O}=p||{};return g("x",m),g("y",O),new D(m,O,X,u(m*O))}static normalizeZ(p){const m=r.invertBatch(p.map(O=>O.ez));return p.map((O,C)=>O.toAffine(m[C])).map(D.fromAffine)}static msm(p,m){return xs(D,d,p,m)}_setWindowSize(p){w.setWindowSize(this,p)}assertValidity(){A(this)}equals(p){F(p);const{ex:m,ey:O,ez:C}=this,{ex:E,ey:j,ez:z}=p,N=u(m*z),U=u(E*C),$=u(O*z),H=u(j*C);return N===U&&$===H}is0(){return this.equals(D.ZERO)}negate(){return new D(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:p}=t,{ex:m,ey:O,ez:C}=this,E=u(m*m),j=u(O*O),z=u(ze*u(C*C)),N=u(p*E),U=m+O,$=u(u(U*U)-E-j),H=N+j,ne=H-z,oe=N-j,Q=u($*ne),ce=u(H*oe),de=u($*oe),je=u(ne*H);return new D(Q,ce,je,de)}add(p){F(p);const{a:m,d:O}=t,{ex:C,ey:E,ez:j,et:z}=this,{ex:N,ey:U,ez:$,et:H}=p;if(m===BigInt(-1)){const Jt=u((E-C)*(U+N)),Xt=u((E+C)*(U-N)),it=u(Xt-Jt);if(it===ee)return this.double();const Zt=u(j*ze*H),Qt=u(z*ze*$),er=Qt+Zt,tr=Xt+Jt,rr=Qt-Zt,mo=u(er*it),Eo=u(tr*rr),vo=u(er*rr),_o=u(it*tr);return new D(mo,Eo,_o,vo)}const ne=u(C*N),oe=u(E*U),Q=u(z*O*H),ce=u(j*$),de=u((C+E)*(N+U)-ne-oe),je=ce-Q,Yt=ce+Q,Gt=u(oe-m*ne),yo=u(de*je),go=u(Yt*Gt),wo=u(de*Gt),Do=u(je*Yt);return new D(yo,go,Do,wo)}subtract(p){return this.add(p.negate())}wNAF(p){return w.wNAFCached(this,p,D.normalizeZ)}multiply(p){const m=p;Se("scalar",m,X,n);const{p:O,f:C}=this.wNAF(m);return D.normalizeZ([O,C])[0]}multiplyUnsafe(p,m=D.ZERO){const O=p;return Se("scalar",O,ee,n),O===ee?I:this.is0()||O===X?this:w.wNAFCachedUnsafe(this,O,D.normalizeZ,m)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return w.unsafeLadder(this,n).is0()}toAffine(p){return S(this,p)}clearCofactor(){const{h:p}=t;return p===X?this:this.multiplyUnsafe(p)}static fromHex(p,m=!1){const{d:O,a:C}=t,E=r.BYTES;p=se("pointHex",p,E),dt("zip215",m);const j=p.slice(),z=p[E-1];j[E-1]=z&-129;const N=qe(j),U=m?s:r.ORDER;Se("pointHex.y",N,ee,U);const $=u(N*N),H=u($-X),ne=u(O*$-C);let{isValid:oe,value:Q}=h(H,ne);if(!oe)throw new Error("Point.fromHex: invalid y coordinate");const ce=(Q&X)===X,de=(z&128)!==0;if(!m&&Q===ee&&de)throw new Error("Point.fromHex: x=0 and x_0=1");return de!==ce&&(Q=u(-Q)),D.fromAffine({x:Q,y:N})}static fromPrivateKey(p){return B(p).point}toRawBytes(){const{x:p,y:m}=this.toAffine(),O=Ct(m,r.BYTES);return O[O.length-1]|=p&X?128:0,O}toHex(){return kt(this.toRawBytes())}}D.BASE=new D(t.Gx,t.Gy,X,u(t.Gx*t.Gy)),D.ZERO=new D(ee,X,X,ee);const{BASE:x,ZERO:I}=D,w=Ss(D,c*8);function v(l){return V(l,n)}function _(l){return v(qe(l))}function B(l){const p=r.BYTES;l=se("private key",l,p);const m=se("hashed private key",i(l),2*p),O=y(m.slice(0,p)),C=m.slice(p,2*p),E=_(O),j=x.multiply(E),z=j.toRawBytes();return{head:O,prefix:C,scalar:E,point:j,pointBytes:z}}function R(l){return B(l).pointBytes}function M(l=new Uint8Array,...p){const m=Or(...p);return _(i(b(m,se("context",l),!!o)))}function L(l,p,m={}){l=se("message",l),o&&(l=o(l));const{prefix:O,scalar:C,pointBytes:E}=B(p),j=M(m.context,O,l),z=x.multiply(j).toRawBytes(),N=M(m.context,z,E,l),U=v(j+N*C);Se("signature.s",U,ee,n);const $=Or(z,Ct(U,r.BYTES));return se("result",$,r.BYTES*2)}const W=Ts;function T(l,p,m,O=W){const{context:C,zip215:E}=O,j=r.BYTES;l=se("signature",l,2*j),p=se("message",p),m=se("publicKey",m,j),E!==void 0&&dt("zip215",E),o&&(p=o(p));const z=qe(l.slice(j,2*j));let N,U,$;try{N=D.fromHex(m,E),U=D.fromHex(l.slice(0,j),E),$=x.multiplyUnsafe(z)}catch{return!1}if(!E&&N.isSmallOrder())return!1;const H=M(C,U.toRawBytes(),N.toRawBytes(),p);return U.add(N.multiplyUnsafe(H)).subtract($).clearCofactor().equals(D.ZERO)}return x._setWindowSize(8),{CURVE:t,getPublicKey:R,sign:L,verify:T,ExtendedPoint:D,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>a(r.BYTES),precompute(l=8,p=D.BASE){return p._setWindowSize(l),p.multiply(BigInt(3)),p}}}}BigInt(0),BigInt(1);const qt=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Br=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Us=BigInt(1),Tr=BigInt(2);BigInt(3);const Ps=BigInt(5),js=BigInt(8);function Ls(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=qt,a=e*e%i*e%i,c=te(a,Tr,i)*a%i,f=te(c,Us,i)*e%i,s=te(f,Ps,i)*f%i,u=te(s,t,i)*s%i,d=te(u,r,i)*u%i,h=te(d,n,i)*d%i,y=te(h,o,i)*h%i,b=te(y,o,i)*h%i,g=te(b,t,i)*s%i;return{pow_p_5_8:te(g,Tr,i)*e%i,b2:a}}function Ns(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Ms(e,t){const r=qt,n=V(t*t*t,r),o=V(n*n*t,r),i=Ls(e*o).pow_p_5_8;let a=V(e*n*i,r);const c=V(t*a*a,r),f=a,s=V(a*Br,r),u=c===e,d=c===V(-e,r),h=c===V(-e*Br,r);return u&&(a=f),(d||h)&&(a=s),ms(a,r)&&(a=V(-a,r)),{isValid:u||d,value:a}}const zs=Rn(qt,void 0,!0),$s={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:zs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:js,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:us,randomBytes:Fn,adjustScalarBytes:Ns,uvRatio:Ms},jn=Rs($s),ks="EdDSA",Hs="JWT",Ye=".",tt="base64url",Ln="utf8",Nn="utf8",qs=":",Vs="did",Ws="key",Ir="base58btc",Ks="z",Ys="K36",Gs=32;function Vt(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Mn(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vt(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function zn(e,t){t||(t=e.reduce((o,i)=>o+i.length,0));const r=Mn(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return Vt(r)}function Js(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(r[a]!==255)throw new TypeError(i+" is ambiguous");r[a]=o}var c=e.length,f=e.charAt(0),s=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var g=0,F=0,S=0,A=b.length;S!==A&&b[S]===0;)S++,g++;for(var D=(A-S)*u+1>>>0,x=new Uint8Array(D);S!==A;){for(var I=b[S],w=0,v=D-1;(I!==0||w<F)&&v!==-1;v--,w++)I+=256*x[v]>>>0,x[v]=I%c>>>0,I=I/c>>>0;if(I!==0)throw new Error("Non-zero carry");F=w,S++}for(var _=D-F;_!==D&&x[_]===0;)_++;for(var B=f.repeat(g);_<D;++_)B+=e.charAt(x[_]);return B}function h(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var g=0;if(b[g]!==" "){for(var F=0,S=0;b[g]===f;)F++,g++;for(var A=(b.length-g)*s+1>>>0,D=new Uint8Array(A);b[g];){var x=r[b.charCodeAt(g)];if(x===255)return;for(var I=0,w=A-1;(x!==0||I<S)&&w!==-1;w--,I++)x+=c*D[w]>>>0,D[w]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");S=I,g++}if(b[g]!==" "){for(var v=A-S;v!==A&&D[v]===0;)v++;for(var _=new Uint8Array(F+(A-v)),B=F;v!==A;)_[B++]=D[v++];return _}}}function y(b){var g=h(b);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:y}}var Xs=Js,Zs=Xs;const $n=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Qs=e=>new TextEncoder().encode(e),ea=e=>new TextDecoder().decode(e);class ta{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class ra{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return kn(this,t)}}class na{constructor(t){this.decoders=t}or(t){return kn(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kn=(e,t)=>new na({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class oa{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new ta(t,r,n),this.decoder=new ra(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const rt=({name:e,prefix:t,encode:r,decode:n})=>new oa(e,t,r,n),Re=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=Zs(r,t);return rt({prefix:e,name:t,encode:n,decode:i=>$n(o(i))})},ia=(e,t,r,n)=>{const o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*r/8|0);let c=0,f=0,s=0;for(let u=0;u<i;++u){const d=o[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|d,c+=r,c>=8&&(c-=8,a[s++]=255&f>>c)}if(c>=r||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},sa=(e,t,r)=>{const n=t[t.length-1]==="=",o=(1<<r)-1;let i="",a=0,c=0;for(let f=0;f<e.length;++f)for(c=c<<8|e[f],a+=8;a>r;)a-=r,i+=t[o&c>>a];if(a&&(i+=t[o&c<<r-a]),n)for(;i.length*r&7;)i+="=";return i},G=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>rt({prefix:t,name:e,encode(o){return sa(o,n,r)},decode(o){return ia(o,n,r,e)}}),aa=rt({prefix:"\0",name:"identity",encode:e=>ea(e),decode:e=>Qs(e)});var ua=Object.freeze({__proto__:null,identity:aa});const ca=G({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fa=Object.freeze({__proto__:null,base2:ca});const la=G({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ha=Object.freeze({__proto__:null,base8:la});const da=Re({prefix:"9",name:"base10",alphabet:"0123456789"});var pa=Object.freeze({__proto__:null,base10:da});const ba=G({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ya=G({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ga=Object.freeze({__proto__:null,base16:ba,base16upper:ya});const wa=G({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Da=G({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ma=G({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ea=G({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),va=G({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_a=G({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Oa=G({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Aa=G({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fa=G({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sa=Object.freeze({__proto__:null,base32:wa,base32upper:Da,base32pad:ma,base32padupper:Ea,base32hex:va,base32hexupper:_a,base32hexpad:Oa,base32hexpadupper:Aa,base32z:Fa});const xa=Re({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ca=Re({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ba=Object.freeze({__proto__:null,base36:xa,base36upper:Ca});const Ta=Re({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ia=Re({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ra=Object.freeze({__proto__:null,base58btc:Ta,base58flickr:Ia});const Ua=G({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pa=G({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ja=G({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),La=G({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Na=Object.freeze({__proto__:null,base64:Ua,base64pad:Pa,base64url:ja,base64urlpad:La});const Hn=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ma=Hn.reduce((e,t,r)=>(e[r]=t,e),[]),za=Hn.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function $a(e){return e.reduce((t,r)=>(t+=Ma[r],t),"")}function ka(e){const t=[];for(const r of e){const n=za[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const Ha=rt({prefix:"🚀",name:"base256emoji",encode:$a,decode:ka});var qa=Object.freeze({__proto__:null,base256emoji:Ha}),Va=qn,Rr=128,Wa=-128,Ka=Math.pow(2,31);function qn(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Ka;)t[r++]=e&255|Rr,e/=128;for(;e&Wa;)t[r++]=e&255|Rr,e>>>=7;return t[r]=e|0,qn.bytes=r-n+1,t}var Ya=Tt,Ga=128,Ur=127;function Tt(e,n){var r=0,n=n||0,o=0,i=n,a,c=e.length;do{if(i>=c)throw Tt.bytes=0,new RangeError("Could not decode varint");a=e[i++],r+=o<28?(a&Ur)<<o:(a&Ur)*Math.pow(2,o),o+=7}while(a>=Ga);return Tt.bytes=i-n,r}var Ja=Math.pow(2,7),Xa=Math.pow(2,14),Za=Math.pow(2,21),Qa=Math.pow(2,28),eu=Math.pow(2,35),tu=Math.pow(2,42),ru=Math.pow(2,49),nu=Math.pow(2,56),ou=Math.pow(2,63),iu=function(e){return e<Ja?1:e<Xa?2:e<Za?3:e<Qa?4:e<eu?5:e<tu?6:e<ru?7:e<nu?8:e<ou?9:10},su={encode:Va,decode:Ya,encodingLength:iu},Vn=su;const Pr=(e,t,r=0)=>(Vn.encode(e,t,r),t),jr=e=>Vn.encodingLength(e),It=(e,t)=>{const r=t.byteLength,n=jr(e),o=n+jr(r),i=new Uint8Array(o+r);return Pr(e,i,0),Pr(r,i,n),i.set(t,o),new au(e,r,t,i)};class au{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}}const Wn=({name:e,code:t,encode:r})=>new uu(e,t,r);class uu{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?It(this.code,r):r.then(n=>It(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Kn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),cu=Wn({name:"sha2-256",code:18,encode:Kn("SHA-256")}),fu=Wn({name:"sha2-512",code:19,encode:Kn("SHA-512")});var lu=Object.freeze({__proto__:null,sha256:cu,sha512:fu});const Yn=0,hu="identity",Gn=$n,du=e=>It(Yn,Gn(e)),pu={code:Yn,name:hu,encode:Gn,digest:du};var bu=Object.freeze({__proto__:null,identity:pu});new TextEncoder,new TextDecoder;const Lr={...ua,...fa,...ha,...pa,...ga,...Sa,...Ba,...Ra,...Na,...qa};({...lu,...bu});function Jn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Nr=Jn("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Dt=Jn("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Mn(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Xn={utf8:Nr,"utf-8":Nr,hex:Lr.base16,latin1:Dt,ascii:Dt,binary:Dt,...Lr};function nt(e,t="utf8"){const r=Xn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function ve(e,t="utf8"){const r=Xn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vt(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Mr(e){return Ie(nt(ve(e,tt),Ln))}function Ge(e){return nt(ve(he(e),Ln),tt)}function yu(e){const t=ve(Ys,Ir),r=Ks+nt(zn([t,e]),Ir);return[Vs,Ws,r].join(qs)}function gu(e){return nt(e,tt)}function wu(e){return ve(e,tt)}function Du(e){return ve([Ge(e.header),Ge(e.payload)].join(Ye),Nn)}function mu(e){return[Ge(e.header),Ge(e.payload),gu(e.signature)].join(Ye)}function Ol(e){const t=e.split(Ye),r=Mr(t[0]),n=Mr(t[1]),o=wu(t[2]),i=ve(t.slice(0,2).join(Ye),Nn);return{header:r,payload:n,signature:o,data:i}}function Al(e=Fn(Gs)){const t=jn.getPublicKey(e);return{secretKey:zn([e,t]),publicKey:t}}async function Fl(e,t,r,n,o=Nt.fromMiliseconds(Date.now())){const i={alg:ks,typ:Hs},a=yu(n.publicKey),c=o+r,f={iss:a,sub:e,aud:t,iat:o,exp:c},s=Du({header:i,payload:f}),u=jn.sign(s,n.secretKey.slice(0,32));return mu({header:i,payload:f,signature:u})}function Zn(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Sl(e,t){t||(t=e.reduce((o,i)=>o+i.length,0));const r=Zn(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}function Eu(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(r[a]!==255)throw new TypeError(i+" is ambiguous");r[a]=o}var c=e.length,f=e.charAt(0),s=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var g=0,F=0,S=0,A=b.length;S!==A&&b[S]===0;)S++,g++;for(var D=(A-S)*u+1>>>0,x=new Uint8Array(D);S!==A;){for(var I=b[S],w=0,v=D-1;(I!==0||w<F)&&v!==-1;v--,w++)I+=256*x[v]>>>0,x[v]=I%c>>>0,I=I/c>>>0;if(I!==0)throw new Error("Non-zero carry");F=w,S++}for(var _=D-F;_!==D&&x[_]===0;)_++;for(var B=f.repeat(g);_<D;++_)B+=e.charAt(x[_]);return B}function h(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var g=0;if(b[g]!==" "){for(var F=0,S=0;b[g]===f;)F++,g++;for(var A=(b.length-g)*s+1>>>0,D=new Uint8Array(A);b[g];){var x=r[b.charCodeAt(g)];if(x===255)return;for(var I=0,w=A-1;(x!==0||I<S)&&w!==-1;w--,I++)x+=c*D[w]>>>0,D[w]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");S=I,g++}if(b[g]!==" "){for(var v=A-S;v!==A&&D[v]===0;)v++;for(var _=new Uint8Array(F+(A-v)),B=F;v!==A;)_[B++]=D[v++];return _}}}function y(b){var g=h(b);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:y}}var vu=Eu,_u=vu;const Ou=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Au=e=>new TextEncoder().encode(e),Fu=e=>new TextDecoder().decode(e);class Su{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class xu{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Qn(this,t)}}class Cu{constructor(t){this.decoders=t}or(t){return Qn(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Qn=(e,t)=>new Cu({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Bu{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Su(t,r,n),this.decoder=new xu(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ot=({name:e,prefix:t,encode:r,decode:n})=>new Bu(e,t,r,n),Ue=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=_u(r,t);return ot({prefix:e,name:t,encode:n,decode:i=>Ou(o(i))})},Tu=(e,t,r,n)=>{const o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*r/8|0);let c=0,f=0,s=0;for(let u=0;u<i;++u){const d=o[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|d,c+=r,c>=8&&(c-=8,a[s++]=255&f>>c)}if(c>=r||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},Iu=(e,t,r)=>{const n=t[t.length-1]==="=",o=(1<<r)-1;let i="",a=0,c=0;for(let f=0;f<e.length;++f)for(c=c<<8|e[f],a+=8;a>r;)a-=r,i+=t[o&c>>a];if(a&&(i+=t[o&c<<r-a]),n)for(;i.length*r&7;)i+="=";return i},J=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ot({prefix:t,name:e,encode(o){return Iu(o,n,r)},decode(o){return Tu(o,n,r,e)}}),Ru=ot({prefix:"\0",name:"identity",encode:e=>Fu(e),decode:e=>Au(e)}),Uu=Object.freeze(Object.defineProperty({__proto__:null,identity:Ru},Symbol.toStringTag,{value:"Module"})),Pu=J({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ju=Object.freeze(Object.defineProperty({__proto__:null,base2:Pu},Symbol.toStringTag,{value:"Module"})),Lu=J({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Nu=Object.freeze(Object.defineProperty({__proto__:null,base8:Lu},Symbol.toStringTag,{value:"Module"})),Mu=Ue({prefix:"9",name:"base10",alphabet:"0123456789"}),zu=Object.freeze(Object.defineProperty({__proto__:null,base10:Mu},Symbol.toStringTag,{value:"Module"})),$u=J({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ku=J({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Hu=Object.freeze(Object.defineProperty({__proto__:null,base16:$u,base16upper:ku},Symbol.toStringTag,{value:"Module"})),qu=J({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vu=J({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wu=J({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ku=J({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yu=J({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gu=J({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ju=J({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xu=J({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zu=J({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Qu=Object.freeze(Object.defineProperty({__proto__:null,base32:qu,base32hex:Yu,base32hexpad:Ju,base32hexpadupper:Xu,base32hexupper:Gu,base32pad:Wu,base32padupper:Ku,base32upper:Vu,base32z:Zu},Symbol.toStringTag,{value:"Module"})),ec=Ue({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tc=Ue({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rc=Object.freeze(Object.defineProperty({__proto__:null,base36:ec,base36upper:tc},Symbol.toStringTag,{value:"Module"})),nc=Ue({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oc=Ue({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ic=Object.freeze(Object.defineProperty({__proto__:null,base58btc:nc,base58flickr:oc},Symbol.toStringTag,{value:"Module"})),sc=J({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ac=J({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uc=J({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cc=J({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),fc=Object.freeze(Object.defineProperty({__proto__:null,base64:sc,base64pad:ac,base64url:uc,base64urlpad:cc},Symbol.toStringTag,{value:"Module"})),eo=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),lc=eo.reduce((e,t,r)=>(e[r]=t,e),[]),hc=eo.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function dc(e){return e.reduce((t,r)=>(t+=lc[r],t),"")}function pc(e){const t=[];for(const r of e){const n=hc[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const bc=ot({prefix:"🚀",name:"base256emoji",encode:dc,decode:pc}),yc=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:bc},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const zr={...Uu,...ju,...Nu,...zu,...Hu,...Qu,...rc,...ic,...fc,...yc};function to(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const $r=to("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),mt=to("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Zn(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),ro={utf8:$r,"utf-8":$r,hex:zr.base16,latin1:mt,ascii:mt,binary:mt,...zr};function xl(e,t="utf8"){const r=ro[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function Cl(e,t="utf8"){const r=ro[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const Bl={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};class gc{}let wc=class extends gc{constructor(t){super()}};const kr=Nt.FIVE_SECONDS,Dc={pulse:"heartbeat_pulse"};let Il=class no extends wc{constructor(t){super(t),this.events=new Ze.EventEmitter,this.interval=kr,this.interval=(t==null?void 0:t.interval)||kr}static async init(t){const r=new no(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Nt.toMiliseconds(this.interval))}pulse(){this.events.emit(Dc.pulse)}};const mc=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ec=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,vc=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function _c(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Oc(e);return}return t}function Oc(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function $e(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!vc.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(mc.test(e)||Ec.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,_c)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function Ac(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function K(e,...t){try{return Ac(e(...t))}catch(r){return Promise.reject(r)}}function Fc(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function Sc(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Ve(e){if(Fc(e))return String(e);if(Sc(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Ve(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Rt="base64:";function xc(e){return typeof e=="string"?e:Rt+Tc(e)}function Cc(e){return typeof e!="string"||!e.startsWith(Rt)?e:Bc(e.slice(Rt.length))}function Bc(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function Tc(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Z(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Ic(...e){return Z(e.join(":"))}function ke(e){return e=Z(e),e?e+":":""}function Rc(e,t){if(t===void 0)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}function Uc(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const Pc="memory",jc=()=>{const e=new Map;return{name:Pc,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function Lc(e={}){const t={mounts:{"":e.driver||jc()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=s=>{for(const u of t.mountpoints)if(s.startsWith(u))return{base:u,relativeKey:s.slice(u.length),driver:t.mounts[u]};return{base:"",relativeKey:s,driver:t.mounts[""]}},n=(s,u)=>t.mountpoints.filter(d=>d.startsWith(s)||u&&s.startsWith(d)).map(d=>({relativeBase:s.length>d.length?s.slice(d.length):void 0,mountpoint:d,driver:t.mounts[d]})),o=(s,u)=>{if(t.watching){u=Z(u);for(const d of t.watchListeners)d(s,u)}},i=async()=>{if(!t.watching){t.watching=!0;for(const s in t.mounts)t.unwatch[s]=await Hr(t.mounts[s],o,s)}},a=async()=>{if(t.watching){for(const s in t.unwatch)await t.unwatch[s]();t.unwatch={},t.watching=!1}},c=(s,u,d)=>{const h=new Map,y=b=>{let g=h.get(b.base);return g||(g={driver:b.driver,base:b.base,items:[]},h.set(b.base,g)),g};for(const b of s){const g=typeof b=="string",F=Z(g?b:b.key),S=g?void 0:b.value,A=g||!b.options?u:{...u,...b.options},D=r(F);y(D).items.push({key:F,value:S,relativeKey:D.relativeKey,options:A})}return Promise.all([...h.values()].map(b=>d(b))).then(b=>b.flat())},f={hasItem(s,u={}){s=Z(s);const{relativeKey:d,driver:h}=r(s);return K(h.hasItem,d,u)},getItem(s,u={}){s=Z(s);const{relativeKey:d,driver:h}=r(s);return K(h.getItem,d,u).then(y=>$e(y))},getItems(s,u={}){return c(s,u,d=>d.driver.getItems?K(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(y=>({key:Ic(d.base,y.key),value:$e(y.value)}))):Promise.all(d.items.map(h=>K(d.driver.getItem,h.relativeKey,h.options).then(y=>({key:h.key,value:$e(y)})))))},getItemRaw(s,u={}){s=Z(s);const{relativeKey:d,driver:h}=r(s);return h.getItemRaw?K(h.getItemRaw,d,u):K(h.getItem,d,u).then(y=>Cc(y))},async setItem(s,u,d={}){if(u===void 0)return f.removeItem(s);s=Z(s);const{relativeKey:h,driver:y}=r(s);y.setItem&&(await K(y.setItem,h,Ve(u),d),y.watch||o("update",s))},async setItems(s,u){await c(s,u,async d=>{if(d.driver.setItems)return K(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Ve(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>K(d.driver.setItem,h.relativeKey,Ve(h.value),h.options)))})},async setItemRaw(s,u,d={}){if(u===void 0)return f.removeItem(s,d);s=Z(s);const{relativeKey:h,driver:y}=r(s);if(y.setItemRaw)await K(y.setItemRaw,h,u,d);else if(y.setItem)await K(y.setItem,h,xc(u),d);else return;y.watch||o("update",s)},async removeItem(s,u={}){typeof u=="boolean"&&(u={removeMeta:u}),s=Z(s);const{relativeKey:d,driver:h}=r(s);h.removeItem&&(await K(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await K(h.removeItem,d+"$",u),h.watch||o("remove",s))},async getMeta(s,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),s=Z(s);const{relativeKey:d,driver:h}=r(s),y=Object.create(null);if(h.getMeta&&Object.assign(y,await K(h.getMeta,d,u)),!u.nativeOnly){const b=await K(h.getItem,d+"$",u).then(g=>$e(g));b&&typeof b=="object"&&(typeof b.atime=="string"&&(b.atime=new Date(b.atime)),typeof b.mtime=="string"&&(b.mtime=new Date(b.mtime)),Object.assign(y,b))}return y},setMeta(s,u,d={}){return this.setItem(s+"$",u,d)},removeMeta(s,u={}){return this.removeItem(s+"$",u)},async getKeys(s,u={}){var F;s=ke(s);const d=n(s,!0);let h=[];const y=[];let b=!0;for(const S of d){(F=S.driver.flags)!=null&&F.maxDepth||(b=!1);const A=await K(S.driver.getKeys,S.relativeBase,u);for(const D of A){const x=S.mountpoint+Z(D);h.some(I=>x.startsWith(I))||y.push(x)}h=[S.mountpoint,...h.filter(D=>!D.startsWith(S.mountpoint))]}const g=u.maxDepth!==void 0&&!b;return y.filter(S=>(!g||Rc(S,u.maxDepth))&&Uc(S,s))},async clear(s,u={}){s=ke(s),await Promise.all(n(s,!1).map(async d=>{if(d.driver.clear)return K(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(y=>d.driver.removeItem(y,u)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(s=>qr(s)))},async watch(s){return await i(),t.watchListeners.push(s),async()=>{t.watchListeners=t.watchListeners.filter(u=>u!==s),t.watchListeners.length===0&&await a()}},async unwatch(){t.watchListeners=[],await a()},mount(s,u){if(s=ke(s),s&&t.mounts[s])throw new Error(`already mounted at ${s}`);return s&&(t.mountpoints.push(s),t.mountpoints.sort((d,h)=>h.length-d.length)),t.mounts[s]=u,t.watching&&Promise.resolve(Hr(u,o,s)).then(d=>{t.unwatch[s]=d}).catch(console.error),f},async unmount(s,u=!0){var d,h;s=ke(s),!(!s||!t.mounts[s])&&(t.watching&&s in t.unwatch&&((h=(d=t.unwatch)[s])==null||h.call(d),delete t.unwatch[s]),u&&await qr(t.mounts[s]),t.mountpoints=t.mountpoints.filter(y=>y!==s),delete t.mounts[s])},getMount(s=""){s=Z(s)+":";const u=r(s);return{driver:u.driver,base:u.base}},getMounts(s="",u={}){return s=Z(s),n(s,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(s,u={})=>f.getKeys(s,u),get:(s,u={})=>f.getItem(s,u),set:(s,u,d={})=>f.setItem(s,u,d),has:(s,u={})=>f.hasItem(s,u),del:(s,u={})=>f.removeItem(s,u),remove:(s,u={})=>f.removeItem(s,u)};return f}function Hr(e,t,r){return e.watch?e.watch((n,o)=>t(n,r+o)):()=>{}}async function qr(e){typeof e.dispose=="function"&&await K(e.dispose)}const Nc="idb-keyval";var Mc=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=o=>t+o;let n;return e.dbName&&e.storeName&&(n=mn(e.dbName,e.storeName)),{name:Nc,options:e,async hasItem(o){return!(typeof await cr(r(o),n)>"u")},async getItem(o){return await cr(r(o),n)??null},setItem(o,i){return Wo(r(o),i,n)},removeItem(o){return Ko(r(o),n)},getKeys(){return Jo(n)},clear(){return Yo(n)}}};const zc="WALLET_CONNECT_V2_INDEXED_DB",$c="keyvaluestorage";let kc=class{constructor(){this.indexedDb=Lc({driver:Mc({dbName:zc,storeName:$c})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,he(r))}async removeItem(t){await this.indexedDb.removeItem(t)}};var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},We={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,n){this[r]=String(n)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Et<"u"&&Et.localStorage?We.exports=Et.localStorage:typeof window<"u"&&window.localStorage?We.exports=window.localStorage:We.exports=new t})();function Hc(e){var t;return[e[0],Ie((t=e[1])!=null?t:"")]}class qc{constructor(){this.localStorage=We.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Hc)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return Ie(r)}async setItem(t,r){this.localStorage.setItem(t,he(r))}async removeItem(t){this.localStorage.removeItem(t)}}const Vc="wc_storage_version",Vr=1,Wc=async(e,t,r)=>{const n=Vc,o=await t.getItem(n);if(o&&o>=Vr){r(t);return}const i=await e.getKeys();if(!i.length){r(t);return}const a=[];for(;i.length;){const c=i.shift();if(!c)continue;const f=c.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const s=await e.getItem(c);await t.setItem(c,s),a.push(c)}}await t.setItem(n,Vr),r(t),Kc(e,a)},Kc=async(e,t)=>{t.length&&t.forEach(async r=>{await e.removeItem(r)})};let Ul=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new qc;this.storage=t;try{const r=new kc;Wc(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}};var vt,Wr;function Yc(){if(Wr)return vt;Wr=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}vt=t;function t(r,n,o){var i=o&&o.stringify||e,a=1;if(typeof r=="object"&&r!==null){var c=n.length+a;if(c===1)return r;var f=new Array(c);f[0]=i(r);for(var s=1;s<c;s++)f[s]=i(n[s]);return f.join(" ")}if(typeof r!="string")return r;var u=n.length;if(u===0)return r;for(var d="",h=1-a,y=-1,b=r&&r.length||0,g=0;g<b;){if(r.charCodeAt(g)===37&&g+1<b){switch(y=y>-1?y:0,r.charCodeAt(g+1)){case 100:case 102:if(h>=u||n[h]==null)break;y<g&&(d+=r.slice(y,g)),d+=Number(n[h]),y=g+2,g++;break;case 105:if(h>=u||n[h]==null)break;y<g&&(d+=r.slice(y,g)),d+=Math.floor(Number(n[h])),y=g+2,g++;break;case 79:case 111:case 106:if(h>=u||n[h]===void 0)break;y<g&&(d+=r.slice(y,g));var F=typeof n[h];if(F==="string"){d+="'"+n[h]+"'",y=g+2,g++;break}if(F==="function"){d+=n[h].name||"<anonymous>",y=g+2,g++;break}d+=i(n[h]),y=g+2,g++;break;case 115:if(h>=u)break;y<g&&(d+=r.slice(y,g)),d+=String(n[h]),y=g+2,g++;break;case 37:y<g&&(d+=r.slice(y,g)),d+="%",y=g+2,g++,h--;break}++h}++g}return y===-1?r:(y<b&&(d+=r.slice(y)),d)}return vt}var _t,Kr;function Gc(){if(Kr)return _t;Kr=1;const e=Yc();_t=o;const t=I().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:b,res:b,err:h};function n(w,v){return Array.isArray(w)?w.filter(function(B){return B!=="!stdSerializers.err"}):w===!0?Object.keys(v):!1}function o(w){w=w||{},w.browser=w.browser||{};const v=w.browser.transmit;if(v&&typeof v.send!="function")throw Error("pino: transmit option must have a send function");const _=w.browser.write||t;w.browser.write&&(w.browser.asObject=!0);const B=w.serializers||{},R=n(w.browser.serialize,B);let M=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const L=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),w.enabled===!1&&(w.level="silent");const W=w.level||"info",T=Object.create(_);T.log||(T.log=F),Object.defineProperty(T,"levelVal",{get:p}),Object.defineProperty(T,"level",{get:m,set:O});const l={transmit:v,serialize:R,asObject:w.browser.asObject,levels:L,timestamp:y(w)};T.levels=o.levels,T.level=W,T.setMaxListeners=T.getMaxListeners=T.emit=T.addListener=T.on=T.prependListener=T.once=T.prependOnceListener=T.removeListener=T.removeAllListeners=T.listeners=T.listenerCount=T.eventNames=T.write=T.flush=F,T.serializers=B,T._serialize=R,T._stdErrSerialize=M,T.child=C,v&&(T._logEvent=d());function p(){return this.level==="silent"?1/0:this.levels.values[this.level]}function m(){return this._level}function O(E){if(E!=="silent"&&!this.levels.values[E])throw Error("unknown level "+E);this._level=E,i(l,T,"error","log"),i(l,T,"fatal","error"),i(l,T,"warn","error"),i(l,T,"info","log"),i(l,T,"debug","log"),i(l,T,"trace","log")}function C(E,j){if(!E)throw new Error("missing bindings for child Pino");j=j||{},R&&E.serializers&&(j.serializers=E.serializers);const z=j.serializers;if(R&&z){var N=Object.assign({},B,z),U=w.browser.serialize===!0?Object.keys(N):R;delete E.serializers,f([E],U,N,this._stdErrSerialize)}function $(H){this._childLevel=(H._childLevel|0)+1,this.error=s(H,E,"error"),this.fatal=s(H,E,"fatal"),this.warn=s(H,E,"warn"),this.info=s(H,E,"info"),this.debug=s(H,E,"debug"),this.trace=s(H,E,"trace"),N&&(this.serializers=N,this._serialize=U),v&&(this._logEvent=d([].concat(H._logEvent.bindings,E)))}return $.prototype=this,new $(this)}return T}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:A,unixTime:D,isoTime:x});function i(w,v,_,B){const R=Object.getPrototypeOf(v);v[_]=v.levelVal>v.levels.values[_]?F:R[_]?R[_]:t[_]||t[B]||F,a(w,v,_)}function a(w,v,_){!w.transmit&&v[_]===F||(v[_]=function(B){return function(){const M=w.timestamp(),L=new Array(arguments.length),W=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var T=0;T<L.length;T++)L[T]=arguments[T];if(w.serialize&&!w.asObject&&f(L,this._serialize,this.serializers,this._stdErrSerialize),w.asObject?B.call(W,c(this,_,L,M)):B.apply(W,L),w.transmit){const l=w.transmit.level||v.level,p=o.levels.values[l],m=o.levels.values[_];if(m<p)return;u(this,{ts:M,methodLevel:_,methodValue:m,transmitValue:o.levels.values[w.transmit.level||v.level],send:w.transmit.send,val:v.levelVal},L)}}}(v[_]))}function c(w,v,_,B){w._serialize&&f(_,w._serialize,w.serializers,w._stdErrSerialize);const R=_.slice();let M=R[0];const L={};B&&(L.time=B),L.level=o.levels.values[v];let W=(w._childLevel|0)+1;if(W<1&&(W=1),M!==null&&typeof M=="object"){for(;W--&&typeof R[0]=="object";)Object.assign(L,R.shift());M=R.length?e(R.shift(),R):void 0}else typeof M=="string"&&(M=e(R.shift(),R));return M!==void 0&&(L.msg=M),L}function f(w,v,_,B){for(const R in w)if(B&&w[R]instanceof Error)w[R]=o.stdSerializers.err(w[R]);else if(typeof w[R]=="object"&&!Array.isArray(w[R]))for(const M in w[R])v&&v.indexOf(M)>-1&&M in _&&(w[R][M]=_[M](w[R][M]))}function s(w,v,_){return function(){const B=new Array(1+arguments.length);B[0]=v;for(var R=1;R<B.length;R++)B[R]=arguments[R-1];return w[_].apply(this,B)}}function u(w,v,_){const B=v.send,R=v.ts,M=v.methodLevel,L=v.methodValue,W=v.val,T=w._logEvent.bindings;f(_,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=R,w._logEvent.messages=_.filter(function(l){return T.indexOf(l)===-1}),w._logEvent.level.label=M,w._logEvent.level.value=L,B(M,w._logEvent,W),w._logEvent=d(T)}function d(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function h(w){const v={type:w.constructor.name,msg:w.message,stack:w.stack};for(const _ in w)v[_]===void 0&&(v[_]=w[_]);return v}function y(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?S:A}function b(){return{}}function g(w){return w}function F(){}function S(){return!1}function A(){return Date.now()}function D(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function I(){function w(v){return typeof v<"u"&&v}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return _t}var Ee=Gc();const oo=bn(Ee),Jc={level:"info"},Pe="custom_context",Wt=1e3*1024;let Xc=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Yr=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new Xc(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}},io=class{constructor(t,r=Wt){this.level=t??"error",this.levelValue=Ee.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Yr(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===Ee.levels.values.error?console.error(t):r===Ee.levels.values.warn?console.warn(t):r===Ee.levels.values.debug?console.debug(t):r===Ee.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(he({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Yr(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(he({extraMetadata:t})),new Blob(r,{type:"application/json"})}};class Zc{constructor(t,r=Wt){this.baseChunkLogger=new io(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class Qc{constructor(t,r=Wt){this.baseChunkLogger=new io(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var ef=Object.defineProperty,tf=Object.defineProperties,rf=Object.getOwnPropertyDescriptors,Gr=Object.getOwnPropertySymbols,nf=Object.prototype.hasOwnProperty,of=Object.prototype.propertyIsEnumerable,Jr=(e,t,r)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t)=>{for(var r in t||(t={}))nf.call(t,r)&&Jr(e,r,t[r]);if(Gr)for(var r of Gr(t))of.call(t,r)&&Jr(e,r,t[r]);return e},Xe=(e,t)=>tf(e,rf(t));function Ml(e){return Xe(Je({},e),{level:(e==null?void 0:e.level)||Jc.level})}function sf(e,t=Pe){return e[t]||""}function af(e,t,r=Pe){return e[r]=t,e}function uf(e,t=Pe){let r="";return typeof e.bindings>"u"?r=sf(e,t):r=e.bindings().context||"",r}function cf(e,t,r=Pe){const n=uf(e,r);return n.trim()?`${n}/${t}`:t}function zl(e,t,r=Pe){const n=cf(e,t,r),o=e.child({context:n});return af(o,n,r)}function ff(e){var t,r;const n=new Zc((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:oo(Xe(Je({},e.opts),{level:"trace",browser:Xe(Je({},(r=e.opts)==null?void 0:r.browser),{write:o=>n.write(o)})})),chunkLoggerController:n}}function lf(e){var t;const r=new Qc((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:oo(Xe(Je({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function $l(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ff(e):lf(e)}const hf="PARSE_ERROR",df="INVALID_REQUEST",pf="METHOD_NOT_FOUND",bf="INVALID_PARAMS",so="INTERNAL_ERROR",Kt="SERVER_ERROR",yf=[-32700,-32600,-32601,-32602,-32603],xe={[hf]:{code:-32700,message:"Parse error"},[df]:{code:-32600,message:"Invalid Request"},[pf]:{code:-32601,message:"Method not found"},[bf]:{code:-32602,message:"Invalid params"},[so]:{code:-32603,message:"Internal error"},[Kt]:{code:-32e3,message:"Server error"}},ao=Kt;function gf(e){return yf.includes(e)}function Xr(e){return Object.keys(xe).includes(e)?xe[e]:xe[ao]}function wf(e){const t=Object.values(xe).find(r=>r.code===e);return t||xe[ao]}function uo(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Ot={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ut=function(e,t){return Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Ut(e,t)};function Df(e,t){Ut(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Pt=function(){return Pt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Pt.apply(this,arguments)};function mf(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Ef(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function vf(e,t){return function(r,n){t(r,n,e)}}function _f(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Of(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?i(u.value):o(u.value).then(c,f)}s((n=n.apply(e,t||[])).next())})}function Af(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(u){s=[6,u],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Ff(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Sf(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function jt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function co(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function xf(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(co(arguments[t]));return e}function Cf(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n}function Be(e){return this instanceof Be?(this.v=e,this):new Be(e)}function Bf(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(y){return new Promise(function(b,g){i.push([h,y,b,g])>1||c(h,y)})})}function c(h,y){try{f(n[h](y))}catch(b){d(i[0][3],b)}}function f(h){h.value instanceof Be?Promise.resolve(h.value.v).then(s,u):d(i[0][2],h)}function s(h){c("next",h)}function u(h){c("throw",h)}function d(h,y){h(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Tf(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,i){t[o]=e[o]?function(a){return(r=!r)?{value:Be(e[o](a)),done:o==="return"}:i?i(a):a}:i}}function If(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof jt=="function"?jt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(c,f){a=e[i](a),o(c,f,a.done,a.value)})}}function o(i,a,c,f){Promise.resolve(f).then(function(s){i({value:s,done:c})},a)}}function Rf(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Uf(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Pf(e){return e&&e.__esModule?e:{default:e}}function jf(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Lf(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Nf=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Pt},__asyncDelegator:Tf,__asyncGenerator:Bf,__asyncValues:If,__await:Be,__awaiter:Of,__classPrivateFieldGet:jf,__classPrivateFieldSet:Lf,__createBinding:Ff,__decorate:Ef,__exportStar:Sf,__extends:Df,__generator:Af,__importDefault:Pf,__importStar:Uf,__makeTemplateObject:Rf,__metadata:_f,__param:vf,__read:co,__rest:mf,__spread:xf,__spreadArrays:Cf,__values:jt},Symbol.toStringTag,{value:"Module"})),Mf=pn(Nf);var ae={},Zr;function zf(){if(Zr)return ae;Zr=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.isBrowserCryptoAvailable=ae.getSubtleCrypto=ae.getBrowerCrypto=void 0;function e(){return(re===null||re===void 0?void 0:re.crypto)||(re===null||re===void 0?void 0:re.msCrypto)||{}}ae.getBrowerCrypto=e;function t(){const n=e();return n.subtle||n.webkitSubtle}ae.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return ae.isBrowserCryptoAvailable=r,ae}var ue={},Qr;function $f(){if(Qr)return ue;Qr=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.isBrowser=ue.isNode=ue.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ue.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ue.isNode=t;function r(){return!e()&&!t()}return ue.isBrowser=r,ue}var en;function kf(){return en||(en=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Mf;t.__exportStar(zf(),e),t.__exportStar($f(),e)}(Ot)),Ot}var Hf=kf();function fo(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function qf(e=6){return BigInt(fo(e))}function Vf(e,t,r){return{id:r||fo(),jsonrpc:"2.0",method:e,params:t}}function kl(e,t){return{id:e,jsonrpc:"2.0",result:t}}function lo(e,t,r){return{id:e,jsonrpc:"2.0",error:Wf(t)}}function Wf(e,t){return typeof e>"u"?Xr(so):(typeof e=="string"&&(e=Object.assign(Object.assign({},Xr(Kt)),{message:e})),gf(e.code)&&(e=wf(e.code)),e)}class Kf{}class Yf extends Kf{constructor(){super()}}class Gf extends Yf{constructor(t){super()}}const Jf="^https?:",Xf="^wss?:";function Zf(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function ho(e,t){const r=Zf(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function tn(e){return ho(e,Jf)}function rn(e){return ho(e,Xf)}function Qf(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function po(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Hl(e){return po(e)&&"method"in e}function el(e){return po(e)&&(tl(e)||bo(e))}function tl(e){return"result"in e}function bo(e){return"error"in e}let ql=class extends Gf{constructor(t){super(t),this.events=new Ze.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Vf(t.method,t.params||[],t.id||qf().toString()),r)}async requestStrict(t,r){return new Promise(async(n,o)=>{if(!this.connection.connected)try{await this.open()}catch(i){o(i)}this.events.on(`${t.id}`,i=>{bo(i)?o(i.error):n(i.result)});try{await this.connection.send(t,r)}catch(i){o(i)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),el(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const rl=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),nl=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",nn=e=>e.split("?")[0],on=10,ol=rl();let Wl=class{constructor(t){if(this.url=t,this.events=new Ze.EventEmitter,this.registering=!1,!rn(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(he(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!rn(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{const o=Hf.isReactNative()?void 0:{rejectUnauthorized:!Qf(t)},i=new ol(t,[],o);nl()?i.onerror=a=>{const c=a;n(this.emitError(c.error))}:i.on("error",a=>{n(this.emitError(a))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Ie(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),o=n.message||n.toString(),i=lo(t,o);this.events.emit("payload",i)}parseError(t,r=this.url){return uo(t,nn(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>on&&this.events.setMaxListeners(on)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${nn(this.url)}`));return this.events.emit("register_error",r),r}};var He={exports:{}},sn;function il(){return sn||(sn=1,function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof re<"u"&&re,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(a){var c=typeof i<"u"&&i||typeof self<"u"&&self||typeof re<"u"&&re||{},f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function s(l){return l&&DataView.prototype.isPrototypeOf(l)}if(f.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(l){return l&&u.indexOf(Object.prototype.toString.call(l))>-1};function h(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(l)||l==="")throw new TypeError('Invalid character in header field name: "'+l+'"');return l.toLowerCase()}function y(l){return typeof l!="string"&&(l=String(l)),l}function b(l){var p={next:function(){var m=l.shift();return{done:m===void 0,value:m}}};return f.iterable&&(p[Symbol.iterator]=function(){return p}),p}function g(l){this.map={},l instanceof g?l.forEach(function(p,m){this.append(m,p)},this):Array.isArray(l)?l.forEach(function(p){if(p.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+p.length);this.append(p[0],p[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(p){this.append(p,l[p])},this)}g.prototype.append=function(l,p){l=h(l),p=y(p);var m=this.map[l];this.map[l]=m?m+", "+p:p},g.prototype.delete=function(l){delete this.map[h(l)]},g.prototype.get=function(l){return l=h(l),this.has(l)?this.map[l]:null},g.prototype.has=function(l){return this.map.hasOwnProperty(h(l))},g.prototype.set=function(l,p){this.map[h(l)]=y(p)},g.prototype.forEach=function(l,p){for(var m in this.map)this.map.hasOwnProperty(m)&&l.call(p,this.map[m],m,this)},g.prototype.keys=function(){var l=[];return this.forEach(function(p,m){l.push(m)}),b(l)},g.prototype.values=function(){var l=[];return this.forEach(function(p){l.push(p)}),b(l)},g.prototype.entries=function(){var l=[];return this.forEach(function(p,m){l.push([m,p])}),b(l)},f.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function F(l){if(!l._noBody){if(l.bodyUsed)return Promise.reject(new TypeError("Already read"));l.bodyUsed=!0}}function S(l){return new Promise(function(p,m){l.onload=function(){p(l.result)},l.onerror=function(){m(l.error)}})}function A(l){var p=new FileReader,m=S(p);return p.readAsArrayBuffer(l),m}function D(l){var p=new FileReader,m=S(p),O=/charset=([A-Za-z0-9_-]+)/.exec(l.type),C=O?O[1]:"utf-8";return p.readAsText(l,C),m}function x(l){for(var p=new Uint8Array(l),m=new Array(p.length),O=0;O<p.length;O++)m[O]=String.fromCharCode(p[O]);return m.join("")}function I(l){if(l.slice)return l.slice(0);var p=new Uint8Array(l.byteLength);return p.set(new Uint8Array(l)),p.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(l){this.bodyUsed=this.bodyUsed,this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:f.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:f.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():f.arrayBuffer&&f.blob&&s(l)?(this._bodyArrayBuffer=I(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||d(l))?this._bodyArrayBuffer=I(l):this._bodyText=l=Object.prototype.toString.call(l):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var l=F(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var l=F(this);return l||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var l=F(this);if(l)return l;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(l){var p=l.toUpperCase();return v.indexOf(p)>-1?p:l}function B(l,p){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');p=p||{};var m=p.body;if(l instanceof B){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,p.headers||(this.headers=new g(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,!m&&l._bodyInit!=null&&(m=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new g(p.headers)),this.method=_(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal||function(){if("AbortController"in c){var E=new AbortController;return E.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(m),(this.method==="GET"||this.method==="HEAD")&&(p.cache==="no-store"||p.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function R(l){var p=new FormData;return l.trim().split("&").forEach(function(m){if(m){var O=m.split("="),C=O.shift().replace(/\+/g," "),E=O.join("=").replace(/\+/g," ");p.append(decodeURIComponent(C),decodeURIComponent(E))}}),p}function M(l){var p=new g,m=l.replace(/\r?\n[\t ]+/g," ");return m.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var C=O.split(":"),E=C.shift().trim();if(E){var j=C.join(":").trim();try{p.append(E,j)}catch(z){console.warn("Response "+z.message)}}}),p}w.call(B.prototype);function L(l,p){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=p.statusText===void 0?"":""+p.statusText,this.headers=new g(p.headers),this.url=p.url||"",this._initBody(l)}w.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var l=new L(null,{status:200,statusText:""});return l.ok=!1,l.status=0,l.type="error",l};var W=[301,302,303,307,308];L.redirect=function(l,p){if(W.indexOf(p)===-1)throw new RangeError("Invalid status code");return new L(null,{status:p,headers:{location:l}})},a.DOMException=c.DOMException;try{new a.DOMException}catch{a.DOMException=function(p,m){this.message=p,this.name=m;var O=Error(p);this.stack=O.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function T(l,p){return new Promise(function(m,O){var C=new B(l,p);if(C.signal&&C.signal.aborted)return O(new a.DOMException("Aborted","AbortError"));var E=new XMLHttpRequest;function j(){E.abort()}E.onload=function(){var U={statusText:E.statusText,headers:M(E.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(E.status<200||E.status>599)?U.status=200:U.status=E.status,U.url="responseURL"in E?E.responseURL:U.headers.get("X-Request-URL");var $="response"in E?E.response:E.responseText;setTimeout(function(){m(new L($,U))},0)},E.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},E.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},E.onabort=function(){setTimeout(function(){O(new a.DOMException("Aborted","AbortError"))},0)};function z(U){try{return U===""&&c.location.href?c.location.href:U}catch{return U}}if(E.open(C.method,z(C.url),!0),C.credentials==="include"?E.withCredentials=!0:C.credentials==="omit"&&(E.withCredentials=!1),"responseType"in E&&(f.blob?E.responseType="blob":f.arrayBuffer&&(E.responseType="arraybuffer")),p&&typeof p.headers=="object"&&!(p.headers instanceof g||c.Headers&&p.headers instanceof c.Headers)){var N=[];Object.getOwnPropertyNames(p.headers).forEach(function(U){N.push(h(U)),E.setRequestHeader(U,y(p.headers[U]))}),C.headers.forEach(function(U,$){N.indexOf($)===-1&&E.setRequestHeader($,U)})}else C.headers.forEach(function(U,$){E.setRequestHeader($,U)});C.signal&&(C.signal.addEventListener("abort",j),E.onreadystatechange=function(){E.readyState===4&&C.signal.removeEventListener("abort",j)}),E.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return T.polyfill=!0,c.fetch||(c.fetch=T,c.Headers=g,c.Request=B,c.Response=L),a.Headers=g,a.Request=B,a.Response=L,a.fetch=T,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=r.fetch?r:n;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(He,He.exports)),He.exports}var sl=il();const an=bn(sl);var al=Object.defineProperty,ul=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertySymbols,fl=Object.prototype.hasOwnProperty,ll=Object.prototype.propertyIsEnumerable,cn=(e,t,r)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fn=(e,t)=>{for(var r in t||(t={}))fl.call(t,r)&&cn(e,r,t[r]);if(un)for(var r of un(t))ll.call(t,r)&&cn(e,r,t[r]);return e},ln=(e,t)=>ul(e,cl(t));const hl={Accept:"application/json","Content-Type":"application/json"},dl="POST",hn={headers:hl,method:dl},dn=10;class Yl{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new Ze.EventEmitter,this.isAvailable=!1,this.registering=!1,!tn(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const r=he(t),n=await(await an(this.url,ln(fn({},hn),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!tn(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));n()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=he({id:1,jsonrpc:"2.0",method:"test",params:[]});await an(t,ln(fn({},hn),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Ie(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),o=n.message||n.toString(),i=lo(t,o);this.events.emit("payload",i)}parseError(t,r=this.url){return uo(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>dn&&this.events.setMaxListeners(dn)}}export{$l as A,bo as B,Bl as C,fo as D,zl as E,Yl as F,yl as G,Co as H,gc as I,nr as J,yn as K,Ao as L,Bo as M,gl as N,oo as O,Al as P,yu as Q,bl as R,Qe as S,Dl as T,wl as U,Nt as a,El as b,vl as c,Sl as d,_l as e,xl as f,Ml as g,Ul as h,Il as i,Vf as j,ml as k,Wl as l,Hl as m,el as n,ql as o,kl as p,Fl as q,Dc as r,Ol as s,Cl as t,he as u,Ie as v,qf as w,lo as x,uf as y,tl as z};
